import{jsxs as e,jsx as i}from"react/jsx-runtime";import{useComboboxContext as a}from"../Combobox.context.js";import{ComboboxActionEnum as t}from"../Combobox.types.js";import{textNormalize as l}from"../../../helpers/text-normalize.utility.js";import{CheckIcon as s}from"../../../icons/Check.js";import{useComponentTheme as o}from"../../../theme/theme.context.js";import{usePropId as r}from"../../../utils/usePropId.js";import{forwardRef as n,useEffect as d}from"react";const c=n(((n,c)=>{const p=o("ComboboxOption"),{value:m,label:u,description:b,media:h}=n,y=!!n.disabled,g=r(n.id),{dispatch:f,externalSearch:j,mode:x,multiple:C,optionColor:O,radius:v,size:N,state:V}=a(),z=l(V.search||""),_=l(u||""),k=l(b||""),A=!j&&!_.includes(z)&&!k.includes(z),I=-1!==V.selectedOptions.findIndex((e=>e.value===m));d((()=>{f({type:t.register,payload:{value:m,label:u}}),V.initialValue&&("string"!=typeof V.initialValue||V.initialValue!==m?Array.isArray(V.initialValue)&&V.initialValue.includes(m)&&f({type:t.multi_select,payload:{value:m,omitOnChange:!0}}):f({type:t.single_select,payload:{value:m,omitOnChange:!0}}))}),[]);return e("button",Object.assign({id:g,ref:c,"aria-selected":I,role:"option",className:p.button({optionColor:O,radius:v,selected:I,hidden:A,size:N,mode:x}),"aria-hidden":A,disabled:y,"aria-disabled":y,onClick:()=>{f(C?{type:t.multi_select,payload:{value:m,toggle:!0}}:{type:t.single_select,payload:{value:m,toggle:!0}})}},{children:[e("div",Object.assign({className:p.optionWrapper()},{children:[h,e("div",Object.assign({className:p.infoWrapper()},{children:[i("span",Object.assign({className:p.label({disabled:y,selected:I})},{children:u})),i("span",Object.assign({className:p.description({disabled:y,selected:I})},{children:b}))]}))]})),I&&i(s,{className:p.icon({size:N})})]}))}));c.displayName="ComboboxOption";export{c as ComboboxOption};
