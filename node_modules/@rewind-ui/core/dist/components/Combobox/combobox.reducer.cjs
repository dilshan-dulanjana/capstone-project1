"use strict";var e=require("./Combobox.types.cjs");exports.comboboxReducer=(a,s)=>{switch(s.type){case e.ComboboxActionEnum.register:return Object.assign(Object.assign({},a),{options:[...a.options,{label:s.payload.label,value:s.payload.value}]});case e.ComboboxActionEnum.single_select:if(!s.payload.omitOnChange&&a.onChange&&a.onChange(s.payload.value),void 0===s.payload.value)return a;const n=a.selectedOptions.find((e=>e.value===s.payload.value)),t=a.options.find((e=>e.value===s.payload.value));return Object.assign(Object.assign({},a),{search:"",searching:!1,selectedOptions:n&&s.payload.toggle?[]:[t]});case e.ComboboxActionEnum.multi_select:const o=a.selectedOptions.find((e=>e.value===s.payload.value));let c=a.selectedOptions.filter((e=>e.value!==(null==o?void 0:o.value)));if(o&&s.payload.toggle)return!s.payload.omitOnChange&&a.onChange&&a.onChange(c.map((e=>e.value))),Object.assign(Object.assign({},a),{search:"",searching:!1,selectedOptions:c});if(o&&!s.payload.toggle)return a;const i=a.options.find((e=>e.value===s.payload.value));return c=[...a.selectedOptions,i],!s.payload.omitOnChange&&a.onChange&&a.onChange(c.map((e=>e.value))),Object.assign(Object.assign({},a),{search:"",searching:!1,selectedOptions:c});case e.ComboboxActionEnum.init_multi_select:const l=a.selectedOptions.map((e=>e.value)).sort(),r=s.payload.values.sort(),u=l.length===r.length;if(r.every(((e,a)=>l[a]===e))&&u)return a;const g=a.options.filter((e=>s.payload.values.includes(e.value)));return Object.assign(Object.assign({},a),{selectedOptions:g});case e.ComboboxActionEnum.remove_last:if(a.onChange){const e=a.selectedOptions.slice(0,-1).map((e=>e.value));a.onChange(a.multiple?e:e[0])}return Object.assign(Object.assign({},a),{search:"",searching:!1,selectedOptions:a.selectedOptions.slice(0,-1)});case e.ComboboxActionEnum.reset:return a.onChange&&a.onChange(null),Object.assign(Object.assign({},a),{search:"",searching:!1,selectedOptions:[]});case e.ComboboxActionEnum.search_start:return Object.assign(Object.assign({},a),{search:s.payload.search,searching:!0});case e.ComboboxActionEnum.search_reset:return Object.assign(Object.assign({},a),{search:"",searching:!1});default:return a}};
