'use client';
"use strict";var e=require("tslib"),s=require("react/jsx-runtime"),a=require("../../theme/theme.context.cjs"),r=require("../../utils/usePropId.cjs"),d=require("react"),t=require("../../node_modules/date-fns/esm/locale/en-GB/index.cjs"),n=require("../../icons/AngleLeft.cjs"),i=require("../../icons/AngleRight.cjs"),l=require("./use-week.hook.cjs"),o=require("./use-months.hook.cjs"),c=require("./use-years.hook.cjs"),m=require("../../node_modules/date-fns/esm/isValid/index.cjs"),u=require("../../node_modules/date-fns/esm/isBefore/index.cjs"),b=require("../../node_modules/date-fns/esm/startOfMonth/index.cjs"),j=require("../../node_modules/date-fns/esm/subYears/index.cjs"),h=require("../../node_modules/date-fns/esm/subMonths/index.cjs"),y=require("../../node_modules/date-fns/esm/format/index.cjs"),x=require("../../node_modules/date-fns/esm/isAfter/index.cjs"),g=require("../../node_modules/date-fns/esm/endOfMonth/index.cjs"),v=require("../../node_modules/date-fns/esm/addYears/index.cjs"),f=require("../../node_modules/date-fns/esm/addMonths/index.cjs"),D=require("../../node_modules/date-fns/esm/isToday/index.cjs"),q=require("../../node_modules/date-fns/esm/isSameDay/index.cjs"),w=require("../../node_modules/date-fns/esm/isSameMonth/index.cjs"),p=require("../../node_modules/framer-motion/dist/es/render/dom/motion.cjs");const N={bordered:!0,borderStyle:"solid",dayFormat:"EEEEE",disabledWeekends:!0,horizontalBorders:!0,radius:"md",shadow:"sm",size:"md",verticalBorders:!0},O=d.forwardRef(((O,k)=>{const S=a.useComponentTheme("Calendar"),[_,C]=d.useState("calendar"),L=Object.assign(Object.assign({},N),O),{bordered:z,borderStyle:B,children:M,className:$="",value:E,dayFormat:R,blueDates:F=[],redDates:T=[],greenDates:A=[],yellowDates:W=[],purpleDates:P=[],disabledDates:I=[],disabledWeekends:Y,horizontalBorders:G,locale:V=t,maxDate:H,minDate:J,radius:K,shadow:Q,size:U,verticalBorders:X,onChange:Z}=L,ee=e.__rest(L,["bordered","borderStyle","children","className","value","dayFormat","blueDates","redDates","greenDates","yellowDates","purpleDates","disabledDates","disabledWeekends","horizontalBorders","locale","maxDate","minDate","radius","shadow","size","verticalBorders","onChange"]),[se,ae]=d.useState(E),[re,de]=d.useState(E||new Date),te=r.usePropId(O.id);d.useEffect((()=>{if(E&&m(E))return ae(E),void de(E);ae(null)}),[E]),d.useEffect((()=>{Z&&Z(se)}),[se]);const{weekRows:ne,weekdays:ie}=l.useWeek({month:re,disabledWeekends:Y,disabledDates:I,minDate:J,maxDate:H,blueDates:F,redDates:T,greenDates:A,yellowDates:W,purpleDates:P}),le=o.useMonths(re),oe=c.useYears(re),ce=s.jsxs("div",Object.assign({className:S.nav()},{children:[s.jsx("button",Object.assign({"aria-label":"year"===_?"Previous 12 years":"Previous month",type:"button",className:S.navButton({radius:K,size:U,bordered:z,borderStyle:B,shadow:Q}),disabled:J&&u(b(re),J),onClick:()=>{de("year"===_?j(re,12):h(re,1))}},{children:s.jsx(n.AngleLeft,{})})),s.jsxs("div",Object.assign({className:S.navMonth()},{children:[s.jsx("button",Object.assign({type:"button","aria-label":"Select month",onClick:()=>C("month"===_?"calendar":"month")},{children:s.jsx("time",Object.assign({dateTime:y(re,"LLLL")},{children:y(re,"LLLL",{locale:V})}))})),s.jsx("button",Object.assign({type:"button","aria-label":"Select year",onClick:()=>C("year"===_?"calendar":"year")},{children:s.jsx("time",Object.assign({dateTime:y(re,"yyyy")},{children:y(re,"yyyy",{locale:V})}))}))]})),s.jsx("button",Object.assign({"aria-label":"year"===_?"Next 12 years":"Next month",type:"button",className:S.navButton({radius:K,size:U,bordered:z,borderStyle:B,shadow:Q}),disabled:H&&x(g(re),H),onClick:()=>{de("year"===_?v(re,12):f(re,1))}},{children:s.jsx(i.AngleRight,{})}))]})),me=s.jsx("div",Object.assign({className:S.head()},{children:ie.map(((e,a)=>s.jsx("div",Object.assign({className:S.weekDay()},{children:y(e,R,{locale:V})}),`weekday-${a}`)))})),ue=s.jsx(s.Fragment,{children:le.map(((e,a)=>s.jsx("div",Object.assign({className:S.calendarRow({borderStyle:B,verticalBorders:X})},{children:e.map(((e,a)=>s.jsx("button",Object.assign({onClick:()=>{de(e),C("year")},className:S.calendarCell({color:"white",size:U})},{children:y(e,"LLLL",{locale:V})}),`month-${a}`)))}),`month-row-${a}`)))}),be=s.jsx(s.Fragment,{children:oe.map(((e,a)=>s.jsx("div",Object.assign({className:S.calendarRow({borderStyle:B,verticalBorders:X})},{children:e.map(((e,a)=>s.jsx("button",Object.assign({onClick:()=>{de(e),C("calendar")},className:S.calendarCell({color:"white",size:U})},{children:y(e,"yyyy",{locale:V})}),`year-${a}`)))}),`year-row-${a}`)))}),je=s.jsx(s.Fragment,{children:ne.map(((e,a)=>s.jsx("div",Object.assign({className:S.calendarRow({borderStyle:B,verticalBorders:X})},{children:e.map(((e,a)=>s.jsxs("button",Object.assign({onClick:()=>{e.disabled||(ae(e.value),de(b(e.value)))},disabled:e.disabled,className:S.calendarCell({isToday:D(e.value),isSameDay:se&&m(se)&&q(e.value,se),isSameMonth:w(e.value,re),color:e.color,size:U})},{children:[se&&m(se)&&q(e.value,se)&&s.jsx(p.motion.div,{layoutId:`${te}-day-thumb`,className:S.thumb({size:U}),transition:{duration:.25,type:"spring"}}),s.jsxs("time",Object.assign({className:S.dayLabel(),dateTime:y(e.value,"MM/dd/yyyy")},{children:[" ",e.value.getDate()]}))]}),`day-${e.value.getDate()}-${a}`)))}),`week-${a}`)))});return s.jsxs("div",Object.assign({id:te,ref:k,className:S.base({className:$,size:U})},ee,{children:[ce,"calendar"===_&&me,s.jsxs("div",Object.assign({className:S.calendar({bordered:z,borderStyle:B,className:$,radius:K,shadow:Q,horizontalBorders:G})},{children:["calendar"===_&&je,"month"===_&&ue,"year"===_&&be]}))]}))}));O.displayName="Calendar",module.exports=O;
