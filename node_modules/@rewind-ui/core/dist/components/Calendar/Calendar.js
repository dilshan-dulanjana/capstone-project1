'use client';
import{__rest as e}from"tslib";import{jsxs as a,jsx as s,Fragment as d}from"react/jsx-runtime";import{useComponentTheme as o}from"../../theme/theme.context.js";import{usePropId as r}from"../../utils/usePropId.js";import{forwardRef as t,useState as i,useEffect as n}from"react";import l from"../../node_modules/date-fns/esm/locale/en-GB/index.js";import{AngleLeft as m}from"../../icons/AngleLeft.js";import{AngleRight as c}from"../../icons/AngleRight.js";import{useWeek as b}from"./use-week.hook.js";import{useMonths as u}from"./use-months.hook.js";import{useYears as h}from"./use-years.hook.js";import y from"../../node_modules/date-fns/esm/isValid/index.js";import f from"../../node_modules/date-fns/esm/isBefore/index.js";import p from"../../node_modules/date-fns/esm/startOfMonth/index.js";import j from"../../node_modules/date-fns/esm/subYears/index.js";import v from"../../node_modules/date-fns/esm/subMonths/index.js";import g from"../../node_modules/date-fns/esm/format/index.js";import D from"../../node_modules/date-fns/esm/isAfter/index.js";import w from"../../node_modules/date-fns/esm/endOfMonth/index.js";import N from"../../node_modules/date-fns/esm/addYears/index.js";import O from"../../node_modules/date-fns/esm/addMonths/index.js";import x from"../../node_modules/date-fns/esm/isToday/index.js";import k from"../../node_modules/date-fns/esm/isSameDay/index.js";import S from"../../node_modules/date-fns/esm/isSameMonth/index.js";import{motion as _}from"../../node_modules/framer-motion/dist/es/render/dom/motion.js";const z={bordered:!0,borderStyle:"solid",dayFormat:"EEEEE",disabledWeekends:!0,horizontalBorders:!0,radius:"md",shadow:"sm",size:"md",verticalBorders:!0},B=t(((t,B)=>{const C=o("Calendar"),[L,M]=i("calendar"),$=Object.assign(Object.assign({},z),t),{bordered:E,borderStyle:R,children:T,className:W="",value:A,dayFormat:F,blueDates:P=[],redDates:I=[],greenDates:Y=[],yellowDates:G=[],purpleDates:V=[],disabledDates:q=[],disabledWeekends:H,horizontalBorders:J,locale:K=l,maxDate:Q,minDate:U,radius:X,shadow:Z,size:ee,verticalBorders:ae,onChange:se}=$,de=e($,["bordered","borderStyle","children","className","value","dayFormat","blueDates","redDates","greenDates","yellowDates","purpleDates","disabledDates","disabledWeekends","horizontalBorders","locale","maxDate","minDate","radius","shadow","size","verticalBorders","onChange"]),[oe,re]=i(A),[te,ie]=i(A||new Date),ne=r(t.id);n((()=>{if(A&&y(A))return re(A),void ie(A);re(null)}),[A]),n((()=>{se&&se(oe)}),[oe]);const{weekRows:le,weekdays:me}=b({month:te,disabledWeekends:H,disabledDates:q,minDate:U,maxDate:Q,blueDates:P,redDates:I,greenDates:Y,yellowDates:G,purpleDates:V}),ce=u(te),be=h(te),ue=a("div",Object.assign({className:C.nav()},{children:[s("button",Object.assign({"aria-label":"year"===L?"Previous 12 years":"Previous month",type:"button",className:C.navButton({radius:X,size:ee,bordered:E,borderStyle:R,shadow:Z}),disabled:U&&f(p(te),U),onClick:()=>{ie("year"===L?j(te,12):v(te,1))}},{children:s(m,{})})),a("div",Object.assign({className:C.navMonth()},{children:[s("button",Object.assign({type:"button","aria-label":"Select month",onClick:()=>M("month"===L?"calendar":"month")},{children:s("time",Object.assign({dateTime:g(te,"LLLL")},{children:g(te,"LLLL",{locale:K})}))})),s("button",Object.assign({type:"button","aria-label":"Select year",onClick:()=>M("year"===L?"calendar":"year")},{children:s("time",Object.assign({dateTime:g(te,"yyyy")},{children:g(te,"yyyy",{locale:K})}))}))]})),s("button",Object.assign({"aria-label":"year"===L?"Next 12 years":"Next month",type:"button",className:C.navButton({radius:X,size:ee,bordered:E,borderStyle:R,shadow:Z}),disabled:Q&&D(w(te),Q),onClick:()=>{ie("year"===L?N(te,12):O(te,1))}},{children:s(c,{})}))]})),he=s("div",Object.assign({className:C.head()},{children:me.map(((e,a)=>s("div",Object.assign({className:C.weekDay()},{children:g(e,F,{locale:K})}),`weekday-${a}`)))})),ye=s(d,{children:ce.map(((e,a)=>s("div",Object.assign({className:C.calendarRow({borderStyle:R,verticalBorders:ae})},{children:e.map(((e,a)=>s("button",Object.assign({onClick:()=>{ie(e),M("year")},className:C.calendarCell({color:"white",size:ee})},{children:g(e,"LLLL",{locale:K})}),`month-${a}`)))}),`month-row-${a}`)))}),fe=s(d,{children:be.map(((e,a)=>s("div",Object.assign({className:C.calendarRow({borderStyle:R,verticalBorders:ae})},{children:e.map(((e,a)=>s("button",Object.assign({onClick:()=>{ie(e),M("calendar")},className:C.calendarCell({color:"white",size:ee})},{children:g(e,"yyyy",{locale:K})}),`year-${a}`)))}),`year-row-${a}`)))}),pe=s(d,{children:le.map(((e,d)=>s("div",Object.assign({className:C.calendarRow({borderStyle:R,verticalBorders:ae})},{children:e.map(((e,d)=>a("button",Object.assign({onClick:()=>{e.disabled||(re(e.value),ie(p(e.value)))},disabled:e.disabled,className:C.calendarCell({isToday:x(e.value),isSameDay:oe&&y(oe)&&k(e.value,oe),isSameMonth:S(e.value,te),color:e.color,size:ee})},{children:[oe&&y(oe)&&k(e.value,oe)&&s(_.div,{layoutId:`${ne}-day-thumb`,className:C.thumb({size:ee}),transition:{duration:.25,type:"spring"}}),a("time",Object.assign({className:C.dayLabel(),dateTime:g(e.value,"MM/dd/yyyy")},{children:[" ",e.value.getDate()]}))]}),`day-${e.value.getDate()}-${d}`)))}),`week-${d}`)))});return a("div",Object.assign({id:ne,ref:B,className:C.base({className:W,size:ee})},de,{children:[ue,"calendar"===L&&he,a("div",Object.assign({className:C.calendar({bordered:E,borderStyle:R,className:W,radius:X,shadow:Z,horizontalBorders:J})},{children:["calendar"===L&&pe,"month"===L&&ye,"year"===L&&fe]}))]}))}));B.displayName="Calendar";export{B as default};
