import n from"../isValid/index.js";import e from"../subMilliseconds/index.js";import o from"../toDate/index.js";import i from"../_lib/format/formatters/index.js";import r from"../_lib/format/longFormatters/index.js";import t from"../_lib/getTimezoneOffsetInMilliseconds/index.js";import{isProtectedWeekYearToken as l,throwProtectedError as a,isProtectedDayOfYearToken as s}from"../_lib/protectedTokens/index.js";import d from"../_lib/toInteger/index.js";import u from"../_lib/requiredArgs/index.js";import{getDefaultOptions as m}from"../_lib/defaultOptions/index.js";import f from"../locale/en-US/index.js";var v=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,c=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,p=/^'([^]*?)'?$/,w=/''/g,g=/[a-zA-Z]/;function k(k,b,h){var j,x,D,S,O,_,W,y,C,E,R,z,A,I,L,T,M,P;u(2,arguments);var Y=String(b),$=m(),q=null!==(j=null!==(x=null==h?void 0:h.locale)&&void 0!==x?x:$.locale)&&void 0!==j?j:f,F=d(null!==(D=null!==(S=null!==(O=null!==(_=null==h?void 0:h.firstWeekContainsDate)&&void 0!==_?_:null==h||null===(W=h.locale)||void 0===W||null===(y=W.options)||void 0===y?void 0:y.firstWeekContainsDate)&&void 0!==O?O:$.firstWeekContainsDate)&&void 0!==S?S:null===(C=$.locale)||void 0===C||null===(E=C.options)||void 0===E?void 0:E.firstWeekContainsDate)&&void 0!==D?D:1);if(!(F>=1&&F<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var H=d(null!==(R=null!==(z=null!==(A=null!==(I=null==h?void 0:h.weekStartsOn)&&void 0!==I?I:null==h||null===(L=h.locale)||void 0===L||null===(T=L.options)||void 0===T?void 0:T.weekStartsOn)&&void 0!==A?A:$.weekStartsOn)&&void 0!==z?z:null===(M=$.locale)||void 0===M||null===(P=M.options)||void 0===P?void 0:P.weekStartsOn)&&void 0!==R?R:0);if(!(H>=0&&H<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!q.localize)throw new RangeError("locale must contain localize property");if(!q.formatLong)throw new RangeError("locale must contain formatLong property");var K=o(k);if(!n(K))throw new RangeError("Invalid time value");var Q=t(K),U=e(K,Q),V={firstWeekContainsDate:F,weekStartsOn:H,locale:q,_originalDate:K};return Y.match(c).map((function(n){var e=n[0];return"p"===e||"P"===e?(0,r[e])(n,q.formatLong):n})).join("").match(v).map((function(n){if("''"===n)return"'";var e=n[0];if("'"===e)return function(n){var e=n.match(p);if(!e)return n;return e[1].replace(w,"'")}(n);var o=i[e];if(o)return null!=h&&h.useAdditionalWeekYearTokens||!l(n)||a(n,b,String(k)),null!=h&&h.useAdditionalDayOfYearTokens||!s(n)||a(n,b,String(k)),o(U,n,q.localize,V);if(e.match(g))throw new RangeError("Format string contains an unescaped latin alphabet character `"+e+"`");return n})).join("")}export{k as default};
