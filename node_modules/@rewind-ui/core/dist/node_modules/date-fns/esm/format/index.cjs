"use strict";var e=require("../isValid/index.cjs"),r=require("../subMilliseconds/index.cjs"),n=require("../toDate/index.cjs"),i=require("../_lib/format/formatters/index.cjs"),o=require("../_lib/format/longFormatters/index.cjs"),t=require("../_lib/getTimezoneOffsetInMilliseconds/index.cjs"),l=require("../_lib/protectedTokens/index.cjs"),a=require("../_lib/toInteger/index.cjs"),s=require("../_lib/requiredArgs/index.cjs"),u=require("../_lib/defaultOptions/index.cjs"),d=require("../locale/en-US/index.cjs"),c=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,v=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,f=/^'([^]*?)'?$/,w=/''/g,g=/[a-zA-Z]/;module.exports=function(m,k,p){var h,b,j,q,x,D,O,S,E,W,_,y,P,C,R,T,z,Y;s(2,arguments);var A=String(k),I=u.getDefaultOptions(),L=null!==(h=null!==(b=null==p?void 0:p.locale)&&void 0!==b?b:I.locale)&&void 0!==h?h:d,M=a(null!==(j=null!==(q=null!==(x=null!==(D=null==p?void 0:p.firstWeekContainsDate)&&void 0!==D?D:null==p||null===(O=p.locale)||void 0===O||null===(S=O.options)||void 0===S?void 0:S.firstWeekContainsDate)&&void 0!==x?x:I.firstWeekContainsDate)&&void 0!==q?q:null===(E=I.locale)||void 0===E||null===(W=E.options)||void 0===W?void 0:W.firstWeekContainsDate)&&void 0!==j?j:1);if(!(M>=1&&M<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var $=a(null!==(_=null!==(y=null!==(P=null!==(C=null==p?void 0:p.weekStartsOn)&&void 0!==C?C:null==p||null===(R=p.locale)||void 0===R||null===(T=R.options)||void 0===T?void 0:T.weekStartsOn)&&void 0!==P?P:I.weekStartsOn)&&void 0!==y?y:null===(z=I.locale)||void 0===z||null===(Y=z.options)||void 0===Y?void 0:Y.weekStartsOn)&&void 0!==_?_:0);if(!($>=0&&$<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!L.localize)throw new RangeError("locale must contain localize property");if(!L.formatLong)throw new RangeError("locale must contain formatLong property");var F=n(m);if(!e(F))throw new RangeError("Invalid time value");var H=t(F),K=r(F,H),Q={firstWeekContainsDate:M,weekStartsOn:$,locale:L,_originalDate:F};return A.match(v).map((function(e){var r=e[0];return"p"===r||"P"===r?(0,o[r])(e,L.formatLong):e})).join("").match(c).map((function(e){if("''"===e)return"'";var r=e[0];if("'"===r)return function(e){var r=e.match(f);if(!r)return e;return r[1].replace(w,"'")}(e);var n=i[r];if(n)return null!=p&&p.useAdditionalWeekYearTokens||!l.isProtectedWeekYearToken(e)||l.throwProtectedError(e,k,String(m)),null!=p&&p.useAdditionalDayOfYearTokens||!l.isProtectedDayOfYearToken(e)||l.throwProtectedError(e,k,String(m)),n(K,e,L.localize,Q);if(r.match(g))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return e})).join("")};
