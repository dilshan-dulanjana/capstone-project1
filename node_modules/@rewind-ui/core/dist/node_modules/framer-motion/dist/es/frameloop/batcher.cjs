"use strict";var e=require("./render-step.cjs");const r=["prepare","read","update","preRender","render","postRender"];exports.createRenderBatcher=function(s,t){let c=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=r.reduce(((r,s)=>(r[s]=e.createRenderStep((()=>c=!0)),r)),{}),p=e=>o[e].process(a),d=()=>{const e=performance.now();c=!1,a.delta=n?1e3/60:Math.max(Math.min(e-a.timestamp,40),1),a.timestamp=e,a.isProcessing=!0,r.forEach(p),a.isProcessing=!1,c&&t&&(n=!1,s(d))};return{schedule:r.reduce(((e,r)=>{const t=o[r];return e[r]=(e,r=!1,o=!1)=>(c||(c=!0,n=!0,a.isProcessing||s(d)),t.schedule(e,r,o)),e}),{}),cancel:e=>r.forEach((r=>o[r].cancel(e))),state:a,steps:o}},exports.stepsOrder=r;
